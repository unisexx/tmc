<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;

class AssessmentFullSeed extends Seeder
{
    public function run(): void
    {
        // ===== Levels =====
        foreach (
            [
                ['code' => 'basic', 'name' => 'ระดับพื้นฐาน'],
                ['code' => 'intermediate', 'name' => 'ระดับกลาง'],
                ['code' => 'advanced', 'name' => 'ระดับสูง'],
            ] as $lv
        ) {
            \App\Models\AssessmentLevel::updateOrCreate(['code' => $lv['code']], $lv);
        }

        // ===== Components (1..6 ชื่อเหมือนกันทุกระดับ) =====
        $components = [
            ['no' => 1, 'name' => 'การบริหารจัดการ', 'short_name' => null],
            ['no' => 2, 'name' => 'กระบวนงาน', 'short_name' => null],
            ['no' => 3, 'name' => 'บุคลากร', 'short_name' => null],
            ['no' => 4, 'name' => 'อาคาร สถานที่', 'short_name' => null],
            ['no' => 5, 'name' => 'เครื่องมือ เครื่องใช้ ยา เวชภัณฑ์ และเอกสารทางการแพทย์', 'short_name' => null],
            ['no' => 6, 'name' => 'ระบบ เทคโนโลยี และแหล่งข้อมูล', 'short_name' => null],
        ];
        foreach ($components as $c) {
            \App\Models\AssessmentComponent::updateOrCreate(['no' => $c['no']], $c);
        }

        // helper
        $upsert = function (string $levelCode, int $compNo, array $questions) {
            $levelId = \App\Models\AssessmentLevel::where('code', $levelCode)->value('id');
            $compId  = \App\Models\AssessmentComponent::where('no', $compNo)->value('id');
            foreach ($questions as $i => $txt) {
                \App\Models\AssessmentQuestion::updateOrCreate(
                    ['assessment_level_id' => $levelId, 'assessment_component_id' => $compId, 'code' => ($i + 1)],
                    ['text' => $txt, 'answer_type' => 'boolean', 'ordering' => ($i + 1) * 10, 'is_active' => true]
                );
            }
        };

        // =========================
        // ระดับพื้นฐาน (basic)
        // =========================
        $upsert('basic', 1, [
            '1. สถานพยาบาลตามกฎหมายว่าด้วยสถานพยาบาล',
            '2. สถานพยาบาลที่ดำเนินการโดยกระทรวง ทบวง กรม องค์กรปกครองส่วนท้องถิ่น รัฐวิสาหกิจ สถาบันการศึกษาของรัฐ หน่วยงานอื่นของรัฐ และสภากาชาดไทย',
            '3. หน่วยบริการตามกฎหมายว่าด้วยหลักประกันสุขภาพแห่งชาติ',
            '1. แผนงาน/โครงการสนับสนุนการดำเนินงานหน่วยบริการสุขภาพผู้เดินทางประจำปี',
            '2. แผนงาน/โครงการจัดหาวัสดุอุปกรณ์ บุคลากร เพื่อสนับสนุนงานบริการ',
            '3. แผนงาน/โครงการเข้าร่วมการพัฒนาศักยภาพบุคลากร',
            '4. แผนงาน/โครงการสื่อสารความเสี่ยงโรคและภัยสุขภาพในพื้นที่ให้กับผู้เดินทาง',
        ]);
        $upsert('basic', 2, [
            '1. การให้คำแนะนำ/ข้อมูลทั่วไปเกี่ยวกับสุขภาพผู้เดินทาง',
            '2. ออกเอกสารรับรองการให้วัคซีนหรือยาป้องกันโรคระหว่างประเทศ',
            '3. การให้วัคซีนเพื่อการเดินทาง',
            '4. การให้ยาเพื่อการเดินทาง (เช่น ยาแก้เมารถ/เรือ/เครื่องบิน)',
            '5. การให้บริการตรวจรักษาเบื้องต้นกรณีอาการป่วยทั่วไปที่พบบ่อยในนักท่องเที่ยว/นักเดินทาง',
        ]);
        $upsert('basic', 3, [
            '1. บุคลากรผ่านการอบรม/พัฒนาศักยภาพด้านสุขภาพผู้เดินทางในระดับพื้นฐาน',
        ]);
        $upsert('basic', 4, [
            '1. มีสถานที่/จุดบริการที่เหมาะสมและปลอดภัย',
            '2. มีป้ายประชาสัมพันธ์/สื่อสารให้ผู้รับบริการทราบจุดบริการ',
        ]);
        $upsert('basic', 5, [
            '1. มีชุดปฐมพยาบาลและอุปกรณ์พื้นฐานเพียงพอ',
            '2. มีแบบฟอร์ม/เอกสารงานบริการที่จำเป็น',
        ]);
        $upsert('basic', 6, [
            '1. ระบบลงทะเบียน/บันทึกข้อมูลผู้รับบริการ',
            '2. ระบบบันทึกการให้วัคซีน/ยาเพื่อการเดินทาง',
            '3. ระบบเอกสารรับรองการฉีดวัคซีนระหว่างประเทศ (INTERVAC)',
            '1. ฐานข้อมูลทั่วไปของผู้รับบริการ เช่น ชื่อ-นามสกุล สัญชาติ เพศ อายุ วัตถุประสงค์การรับบริการ',
            '2. ฐานข้อมูลการออกเอกสารรับรองการให้วัคซีนหรือยาป้องกันโรคระหว่างประเทศ',
            '1. มีทำเนียบเครือข่ายแพทย์เฉพาะทาง/หน่วยบริการ/เฝ้าระวัง/สื่อสารประชาสัมพันธ์ที่เกี่ยวข้อง',
        ]);

        // =========================
        // ระดับกลาง (intermediate)
        // =========================
        $upsert('intermediate', 1, [
            '1. สถานพยาบาลตามกฎหมายว่าด้วยสถานพยาบาล',
            '2. สถานพยาบาลที่ดำเนินการโดยส่วนราชการ/รัฐวิสาหกิจ/หน่วยงานของรัฐ/สภากาชาดไทย',
            '3. หน่วยบริการตามกฎหมายว่าด้วยหลักประกันสุขภาพแห่งชาติ',
            '1. นโยบายและแผนงาน/โครงการสนับสนุนการดำเนินงานหน่วยบริการสุขภาพผู้เดินทางประจำปีหรือแผนระยะยาว',
            '2. แผนพัฒนางานบริการ',
            '3. แผนพัฒนาศักยภาพบุคลากร',
            '4. แผนสื่อสารความเสี่ยง/ประชาสัมพันธ์ด้านสุขภาพผู้เดินทาง',
            '5. มีการติดตามประเมินผลแผน',
        ]);
        $upsert('intermediate', 2, [
            '1. ให้คำปรึกษาก่อนเดินทางเฉพาะราย (Pre-travel)',
            '2. บริการระหว่างเดินทาง/หลังเดินทางกรณีเจ็บป่วยที่พบบ่อยในนักท่องเที่ยว',
            '3. บริการฉีดวัคซีนเพื่อการเดินทางตามข้อบ่งชี้',
            '4. บริการให้ยาเพื่อการเดินทาง เช่น ป้องกันมาลาเรีย ป้องกันแพ้ความสูง',
            '5. บริการออกเอกสารรับรองการฉีดวัคซีนระหว่างประเทศ',
            '6. งานเฝ้าระวัง ป้องกันโรคและภัยสุขภาพเชิงรุกในพื้นที่ท่องเที่ยว',
            '7. ประเมินความเสี่ยงโรค/ภัยสุขภาพในแหล่งท่องเที่ยว',
            '8. ลงพื้นที่ให้ความรู้ผู้เดินทางในพื้นที่ท่องเที่ยว/ที่พัก',
            '9. แผนช่วยเหลือผู้ป่วยฉุกเฉินและซ้อมแผนอย่างน้อยปีละ 1 ครั้ง',
            '10. แผนส่งต่อผู้ป่วยและซ้อมแผนอย่างน้อยปีละ 1 ครั้ง',
            '11. ระบบบันทึก/ติดตามผลการให้บริการครบถ้วน',
            '12. ช่องทางสื่อสารข้อมูลบริการแก่ประชาชน',
        ]);
        $upsert('intermediate', 3, [
            '1. มีแพทย์',
            '2. มีพยาบาล',
            '3. มีเภสัชกร',
            '4. มีเจ้าหน้าที่สาธารณสุข/บุคลากรสนับสนุนงานบริการ',
            '5. บุคลากรผ่านการอบรมหลักสูตรสุขภาพผู้เดินทางระดับกลาง',
            '6. บุคลากรผ่านการอบรม BLS/การช่วยฟื้นคืนชีพเบื้องต้น',
            '7. บุคลากรสื่อสารภาษาอังกฤษ/ภาษาต่างประเทศระดับพื้นฐาน',
            '8. มีเวร/ตารางปฏิบัติงานรองรับการบริการ',
            '9. มีการประชุมทบทวนกรณี/พัฒนาคุณภาพงานบริการ',
            '10. มีช่องทางขอคำปรึกษาจากผู้เชี่ยวชาญ/เครือข่าย',
            '11. มีระบบมอบหมายผู้รับผิดชอบงานชัดเจน',
        ]);
        $upsert('intermediate', 4, [
            '1. ห้องตรวจ/จุดบริการเหมาะสม ปลอดภัย เป็นส่วนตัว',
            '2. มีพื้นที่/ตู้เก็บยาและวัคซีนพร้อมระบบควบคุมอุณหภูมิ',
            '3. มีตู้เย็น/Cold chain สำหรับวัคซีน',
            '4. มีพื้นที่สำหรับเฝ้าสังเกตอาการหลังฉีดวัคซีน',
            '5. มีทางหนีไฟ/ความปลอดภัยพื้นฐาน',
            '6. มีสื่อประชาสัมพันธ์ภายในพื้นที่บริการ',
            '7. มีป้ายภาษาไทย/อังกฤษแจ้งบริการและเวลาให้บริการ',
        ]);
        $upsert('intermediate', 5, [
            // หมวดยาว: วัสดุอุปกรณ์/เวชภัณฑ์/ยา/วัคซีน/แบบฟอร์ม ฯลฯ
            '1. ชุดปฐมพยาบาลและเครื่องมือพื้นฐานพร้อมใช้งาน',
            '2. ชุดช่วยชีวิตขั้นพื้นฐาน (เช่น AED ถ้ามี)',
            '3. อุปกรณ์ติดตามสัญญาณชีพพื้นฐาน',
            '4. ชุดอุปกรณ์ฉีดวัคซีนครบ',
            '5. อุปกรณ์เก็บรักษาวัคซีน/บันทึกอุณหภูมิ',
            // ยาที่เกี่ยวกับ traveler’s diarrhea ฯลฯ
            '6. Norfloxacin สำหรับ Traveler’s diarrhea',
            '7. Ciprofloxacin สำหรับ Traveler’s diarrhea',
            '8. Azithromycin สำหรับ Traveler’s diarrhea',
            '9. ORS',
            '10. Loperamide',
            '11. Bismuth subsalicylate (BSS)',
            // ตัวอย่างรายการอื่น ๆ จากเอกสาร (คงรูปแบบ boolean)
            '12. ยาป้องกันมาลาเรียตามข้อบ่งชี้',
            '13. ยาแพ้ความสูง (เช่น Acetazolamide) ตามข้อบ่งชี้',
            '14. ชุดฉีดวัคซีนชนิดจำเป็นสำหรับการเดินทาง',
            // …รายการต่อเนื่องตามเอกสาร…
            '41. แบบฟอร์ม/เอกสารงานบริการครบ (เวชระเบียน ใบยินยอม สต็อกวัคซีน/ยา ฯลฯ)',
        ]);
        $upsert('intermediate', 6, [
            '1. ระบบลงทะเบียน/ฐานข้อมูลผู้รับบริการ',
            '2. ระบบข้อมูลการให้วัคซีน/ยา',
            '3. ระบบออกหนังสือรับรองการฉีดวัคซีนระหว่างประเทศ',
            '4. ระบบรายงานผลการดำเนินงาน',
            '5. เชื่อมโยงฐานข้อมูลเครือข่ายที่จำเป็น',
            '6. ทำเนียบแพทย์เฉพาะทาง/หน่วยบริการคู่ขนาน',
            '7. ทำเนียบเครือข่ายเฝ้าระวัง สอบสวน ควบคุมโรค',
            '8. ทำเนียบเครือข่ายประชาสัมพันธ์ในพื้นที่ท่องเที่ยว',
            '9. ช่องทางเผยแพร่ความรู้/คู่มือสุขภาพผู้เดินทาง',
            '10. ระบบสำรองข้อมูล',
            '11. กำหนดผู้ดูแลระบบ/สิทธิ์การเข้าถึง',
        ]);

        // =========================
        // ระดับสูง (advanced)
        // =========================
        $upsert('advanced', 1, [
            '1. สถานพยาบาลตามกฎหมายว่าด้วยสถานพยาบาล',
            '2. สถานพยาบาลของรัฐ/รัฐวิสาหกิจ/สภากาชาดไทย ฯลฯ',
            '3. หน่วยบริการตามกฎหมายว่าด้วยหลักประกันสุขภาพแห่งชาติ',
            '4. มีนโยบาย/แผนพัฒนางานบริการสุขภาพผู้เดินทางแบบบูรณาการ',
            '5. แผนพัฒนาระยะยาวและงบประมาณสนับสนุนต่อเนื่อง',
            '6. แผนพัฒนาศักยภาพบุคลากรขั้นสูง',
            '7. แผนสื่อสารความเสี่ยงและสื่อสารกับนานาชาติ',
            '8. มีตัวชี้วัดและการประเมินผลคุณภาพบริการ',
        ]);
        $upsert('advanced', 2, [
            '1. คลินิก/ศูนย์สุขภาพผู้เดินทางครบวงจร Pre/On/Post travel',
            '2. ให้คำปรึกษาเฉพาะรายโดยผู้เชี่ยวชาญ',
            '3. ให้บริการตรวจทางห้องปฏิบัติการพื้นฐานที่จำเป็น',
            '4. ให้บริการรังสีวินิจฉัยพื้นฐานที่จำเป็น',
            '5. บริการยาป้องกันมาลาเรีย/แพ้ความสูง ครบตามแนวทาง',
            '6. บริการฉีดวัคซีนเพื่อการเดินทางที่ซับซ้อน',
            '7. ระบบติดตามผลหลังให้บริการและทบทวนเคส',
            // …ต่อเนื่องจนถึงรายการที่ 23 ตามเอกสาร…
            '23. ช่องทางบริการสื่อสาร/นัดหมายออนไลน์หลายภาษา',
        ]);
        $upsert('advanced', 3, [
            '1. มีแพทย์เฉพาะทางเวชศาสตร์การเดินทาง (TM) หรือผู้เชี่ยวชาญเทียบเท่า',
            '2. พยาบาลที่ผ่านการอบรมเฉพาะทางด้านสุขภาพผู้เดินทาง',
            '3. เภสัชกรที่ผ่านการอบรมด้านยาเพื่อการเดินทาง',
            '4. ทีมสหวิชาชีพพร้อมเวร/ตารางให้บริการ',
            '5. บุคลากรผ่านการอบรม BLS/ACLS ตามบทบาท',
            '6. บุคลากรสื่อสารภาษาอังกฤษ/ภาษาต่างประเทศได้ดี',
            '7. ระบบอบรมภายในและประชุมทบทวนคุณภาพสม่ำเสมอ',
            '8. ช่องทางรับคำปรึกษา/ส่งต่อกับผู้เชี่ยวชาญระดับชาติ',
            '9. ระบบมอบหมายความรับผิดชอบ/On-call ชัดเจน',
            '10. มีผู้ประสานงานด้านระหว่างประเทศ',
            '11. แผนพัฒนาศักยภาพรายบุคคล (IDP)',
            '12. บันทึกสมรรถนะตามบทบาท',
        ]);
        $upsert('advanced', 4, [
            '1. ห้องตรวจ/ห้องฉีดวัคซีน/พื้นที่เฝ้าสังเกตมาตรฐาน',
            '2. โซนเก็บวัคซีน/ยา พร้อมควบคุมอุณหภูมิและบันทึกผล',
            '3. Cold chain พร้อมระบบเตือนอุณหภูมิ',
            '4. มาตรการความปลอดภัยผู้ป่วยและมาตรการป้องกันการติดเชื้อ',
            '5. พื้นที่สื่อสารความเสี่ยง/ให้คำแนะนำหลายภาษา',
            '6. ป้ายบริการ/ระบบคิว/นัดหมายอิเล็กทรอนิกส์',
            '7. สิ่งอำนวยความสะดวกสำหรับผู้พิการ/ผู้สูงอายุ',
        ]);
        $upsert('advanced', 5, [
            // รายการเครื่องมือ/ยา/เวชภัณฑ์ที่ละเอียดมากขึ้น
            '1. ชุดช่วยชีวิตขั้นพื้นฐานและกึ่งก้าวหน้า',
            '2. อุปกรณ์เฝ้าระวังสัญญาณชีพครบ',
            '3. อุปกรณ์ฉีดวัคซีนครบตามมาตรฐาน',
            '4. ระบบ/อุปกรณ์เก็บรักษาวัคซีนพร้อมบันทึกอุณหภูมิอัตโนมัติ',
            '5. ยาสำหรับ Traveler’s diarrhea ชุดสมบูรณ์ (Norfloxacin/Ciprofloxacin/Azithromycin/ORS/Loperamide/BSS)',
            '6. ยาป้องกันมาลาเรียทุกข้อบ่งชี้ที่จำเป็น',
            '7. ยาป้องกัน/รักษาอาการแพ้ความสูง',
            // …ต่อเนื่องจนถึงลิสต์ย่อยทั้งชุดตามเอกสาร…
            '51. แบบฟอร์ม เอกสาร คู่อ้างอิง/แนวทางเวชปฏิบัติครบถ้วนล่าสุด',
        ]);
        $upsert('advanced', 6, [
            '1. ระบบข้อมูลผู้รับบริการเชื่อมโยงคลินิก/ห้องยา/ห้องตรวจ',
            '2. ระบบทะเบียนวัคซีน/ยาแบบอิเล็กทรอนิกส์',
            '3. ระบบออกเอกสารรับรองวัคซีนระหว่างประเทศและบันทึกอัตโนมัติ',
            '4. ระบบรายงานผล/แดชบอร์ดการดำเนินงาน',
            '5. ระบบสำรอง/กู้คืนข้อมูล',
            '6. กำหนดสิทธิ์การเข้าถึงและบันทึกการใช้งาน (audit log)',
            '7. ทำเนียบเครือข่ายผู้เชี่ยวชาญ/หน่วยบริการ/เฝ้าระวัง ครบถ้วน',
            '8. แหล่งความรู้/คู่มืออิเล็กทรอนิกส์สำหรับบุคลากรและประชาชน',
            '9. ช่องทางประชาสัมพันธ์หลายภาษาและนัดหมายออนไลน์',
            '10. บูรณาการข้อมูลกับระบบสุขภาพอื่นที่เกี่ยวข้องตามกฎหมาย',
            '11. นโยบาย/มาตรการคุ้มครองข้อมูลส่วนบุคคล (PDPA) ใช้งานจริง',
        ]);
    }
}
